#!/bin/bash

name="$(xdotool getactivewindow getwindowname)"
name="${name/ - File Manager/}"
title="${name/'/home/gavarch'/'~'}"
title="${title/i3rice-arch/dot}"
cd $name
numSDir="$(ls -l | grep '^d' | wc -l)"

currDir="${name##*/}"

icn="xdotool key shift+ctrl+i"
lst="xdotool key shift+ctrl+l"
                            
ora="xdotool key shift+ctrl+k"
ord="xdotool key shift+ctrl+j"
                            
nme="xdotool key shift+ctrl+n"
dte="xdotool key shift+ctrl+d"
sze="xdotool key shift+ctrl+s"
tpe="xdotool key shift+ctrl+t"

wmctrl -r :ACTIVE: -N ${title}
i3-msg title_format "${title}"

if [[ $numSDir -le 5 ]]; then
	$icn
else
	$lst
fi

case $currDir in
	*)
		$ora
		$nme
		;;
	dwn)
		$ord
		$dte
		;;
esac
