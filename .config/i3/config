# i3 config file (v4)
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

#############################################################################
### MAIN FONT

set $font1 FixedsysMono
set $font2 FontAwesome
set $fonts 12

font pango:$font1,$font2 $fonts

#############################################################################
### DEFINE VARIABLES

# SET $MOD
set $mod Mod1
set $win Mod4

# SET TERM(S)
set $term urxvtc
#set $term urxvt

# BROWSER(S)
set $browser qutebrowser
#set $browser2 chromium
#set $browser2 google-chrome-beta
set $browser2 google-chrome-stable

# COLORS
set_from_resource $black	color0
set_from_resource $red		color1
set_from_resource $green	color2
set_from_resource $yellow	color3
set_from_resource $blue		color4
set_from_resource $magenta	color5
set_from_resource $cyan		color6
set_from_resource $white	color15

# HOME DIR
set $home /home/gavaro
#set $home /home/gavarch
set $scripts scripts
set $scriptpics scriptpics

# WORKSPACE NAMES
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10

# TRANSPARENCY
set $t 99

#############################################################################

# RELOAD CONFIG
bindsym $mod+Shift+c exec --no-startup-id "bash $home/$scripts/xtheme; i3-msg reload; bash $home/$scripts/reloadconfs"

# RESTART i3
bindsym $mod+Shift+r restart

#############################################################################
### BORDERS

# BORDER STYLE <normal|1pixel|pixel xx|none|pixel>
new_window pixel 0
new_float normal

# HIDE BORDERS
hide_edge_borders none

# COLORS
# class                   border  backgr. text    indic.   child_border
client.focused          $blue $blue $black $blue $blue
client.focused_inactive $cyan $cyan $black $cyan $cyan
client.unfocused        $black $black $white $black $black
client.urgent           $red $red $black $red $black
client.placeholder      $black $black $white $black $black
# client.background	$black

# BAR
bar {
	i3bar_command i3bar
	status_command i3blocks -c ~/$scripts/i3blocks.conf
#	status_command i3blocks
	position bottom
	height 20

	bindsym button4 nop
	bindsym button5 nop
	font pango:$font1,$font2 $fonts

	colors {
	background $black

#			   border  backgr. text
	focused_workspace  $blue $blue $black
	active_workspace   $cyan $cyan $black
	inactive_workspace $black $black $white
	binding_mode       $yellow $yellow $black
	urgent_workspace   $red $red $black
	}
}

# hide/unhide i3status bar
bindsym $mod+b bar mode toggle


#############################################################################
### FOR i3 GAPS

gaps inner 10
gaps outer 20

bindsym $mod+Ctrl+y gaps inner current set 0; gaps outer current set 0
bindsym $mod+Ctrl+o gaps inner current set 10; gaps outer current set 20
bindsym $mod+Ctrl+u gaps inner current minus 5; gaps outer current minus 10
bindsym $mod+Ctrl+i gaps inner current plus 5; gaps outer current plus 10

workspace $ws1 gaps inner 0
workspace $ws1 gaps outer 0
workspace $ws5 gaps inner 0
workspace $ws5 gaps outer 0
workspace $ws6 gaps inner 0
workspace $ws6 gaps outer 0

#############################################################################
### WORKSPACE/CONTAINER OPERATIONS

# KILL FOCUSSED
bindsym $mod+Shift+q kill

# CHANGE FOCUS
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# MOVE FOCUSSED
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# RESIZE WINDOWS
bindsym $mod+y resize shrink width 10 px or 10 ppt
bindsym $mod+i resize grow height 10 px or 10 ppt
bindsym $mod+u resize shrink height 10 px or 10 ppt
bindsym $mod+o resize grow width 10 px or 10 ppt

# bindsym $mod+Shift+semicolon resize shrink left 5 px or 5 ppt, resize shrink right 5 px or 5 ppt
# bindsym $mod+Shift+slash resize grow down 5 px or 5 ppt, resize grow up 5 px or 5 ppt
# bindsym $mod+Shift+period resize shrink down 5 px or 5 ppt, resize shrink up 5 px or 5 ppt
# bindsym $mod+Shift+apostrophe resize grow left 5 px or 5 ppt, resize grow right 5 px or 5 ppt

# WORKSPACE BACK & FORTH
workspace_auto_back_and_forth yes

# SPLIT ORIENTATION
bindsym $mod+g split h
bindsym $mod+v split v

# FULLSCREEN TOGGLE
bindsym $mod+F11 fullscreen toggle

# CHANGE CONTAINER LAYOUT
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# CLICK & DRAG FLOATERS
floating_modifier $mod

# TOGGLE TILING/FLOATING
bindsym $mod+Shift+space floating toggle

# CHANGE FOCUS TILING/FLOATING
bindsym $mod+space focus mode_toggle

# TOGGLE STICKY
bindsym $mod+Ctrl+s sticky toggle

# FOCUS PARENT CONTAINER
bindsym $mod+a focus parent

# MOVE SCRATCHPAD
bindsym $mod+Shift+minus move scratchpad

# SCRATCHPAD
bindsym $mod+minus scratchpad show

# WORKSPACE NEXT/PREVIOUS
bindsym $mod+Ctrl+Right workspace next
bindsym $mod+Ctrl+Left workspace prev

# MOVE TO URGENT
for_window [urgent=latest] focus

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# Move to workspace with focused container
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9; workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10; workspace $ws10

assign [instance="RSS"]		$ws1
assign [title="YouTube"]	$ws1
assign [class="Pcmanfm"]	$ws2
assign [class="Nautilus"]	$ws2
assign [instance="FILES"]	$ws2
for_window [class="Spotify"] move to workspace $ws9
assign [instance="MUSIC"]	$ws9
assign [instance="VIS"]		$ws9
assign [class="Arandr"]		$ws10

#############################################################################
### FLOATING WINDOWS

# PRESET
for_window [title="alsamixer"] floating enable border pixel 1
for_window [class="Calamares"] floating enable border normal
for_window [class="Clipgrab"] floating enable
for_window [title="File Transfer*"] floating enable
for_window [class="Galculator"] floating enable border pixel 1
for_window [class="GParted"] floating enable border normal
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-gtk-greeter-settings"] floating enable
for_window [class="Lxappearance"] floating enable sticky enable border normal
for_window [class="Manjaro-hello"] floating enable
for_window [class="Manjaro Settings Manager"] floating enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [class="Nitrogen"] floating enable sticky enable border normal
for_window [class="Oblogout"] fullscreen enable
for_window [class="octopi"] floating enable
for_window [title="About Pale Moon"] floating enable
for_window [class="Pamac-manager"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Qtconfig-qt4"] floating enable sticky enable border normal
for_window [class="Simple-scan"] floating enable border normal
for_window [class="(?i)System-config-printer.py"] floating enable border normal
for_window [class="Skype"] floating enable border normal
for_window [class="Thus"] floating enable border normal
for_window [class="Timeset-gui"] floating enable border normal
for_window [class="(?i)virtualbox"] floating enable border normal
for_window [class="Xfburn"] floating enable

# OWN
for_window [title="Netflix"] floating enable,sticky enable,resize set 460 259
for_window [title="Amazon.co.uk: Prime Video"] \
	floating enable,sticky enable,resize set 460 259
for_window [class="MPlayer"] floating enable,sticky enable
for_window [class="Pavucontrol"] floating enable,resize set 525 300
for_window [class="Pavucontrol"] move right 680,move down 405
for_window [title="Google Play Movies & TV"] \
	floating enable,sticky enable,resize set 480 270
for_window [class="matplotlib"] floating enable
for_window [class="Cam"] floating enable
for_window [title="Log in with PayPal - Chromium"] floating enable
for_window [class="Blueman-manager"] floating enable
for_window [instance="CALC"] floating enable border normal,resize set 480 480
for_window [instance="BASHMOUNT"] floating enable border normal,sticky enable,resize set 430 500,move position center
for_window [instance="GITREPOUPDATE"] floating enable border pixel 1,sticky enable,resize set 430 500,move position center

#############################################################################
### SHUTDOWN MODE

bindsym $mod+Escape mode "SHUTDOWN"
mode "SHUTDOWN" {
    bindsym l exec --no-startup-id i3exit lock, mode "default"
    bindsym s exec --no-startup-id i3exit suspend, mode "default"
    bindsym u exec --no-startup-id i3exit switch_user, mode "default"
    bindsym e exec --no-startup-id i3exit logout, mode "default"
    bindsym h exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r exec --no-startup-id i3exit reboot, mode "default"
    bindsym x exec --no-startup-id i3exit shutdown, mode "default"

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

#############################################################################
### MAIN

# START TERMINAL
bindsym $mod+Return exec $term

# APPLICATION LAUNCHER
bindsym $mod+Ctrl+b exec $term -e 'bmenu'
bindsym $mod+d exec rofi -show drun
bindsym $mod+Shift+d exec dmenu_run -fn "$font1:size=$fonts" -nb "$black" -nf "$white" -sf "$black" -sb "$blue"
bindsym $mod+z exec --no-startup-id morc_menu

# BRIGHTNESS CONTROLS
bindsym $win+o exec xbacklight -inc 10
bindsym $win+y exec xbacklight -dec 10
#bindsym $win+o exec light -A 10
#bindsym $win+y exec light -U 10

# VOLUME CONTROLS
bindsym $win+k exec pactl set-sink-volume 0 +2%
bindsym $win+j exec pactl set-sink-volume 0 -2%
bindsym $win+h exec pactl set-sink-mute 0 toggle

# FILE MANAGERS
bindsym $mod+F12 exec pcmanfm
bindsym $win+F12 exec nautilus
bindsym $mod+Shift+Return exec $term -e ranger
bindsym $win+Shift+Return exec $term -e sudo ranger

bindsym $mod+Shift+F3 exec gksu pcmanfm
#bindsym $mod+F5 exec $term -e 'mocp'
bindsym $win+t exec --no-startup-id pkill compton
bindsym $win+Shift+t exec --no-startup-id compton -b
bindsym $mod+Ctrl+x --release exec --no-startup-id xkill

#############################################################################
### OWN BINDINGS

# SPOTIFY
bindsym $mod+Shift+s exec spotify
bindsym $mod+s exec $term -name MUSIC -e ncmpcpp

# MUSIC PLAYER CONTROLS
bindsym $mod+p exec playerctl play-pause
bindsym $win+p exec mpc toggle
bindsym $mod+bracketright exec playerctl next
bindsym $win+bracketright exec mpc next
bindsym $mod+bracketleft exec playerctl previous
bindsym $win+bracketleft exec mpc prev
bindsym $win+Home exec mpc play
bindsym $win+End exec mpc stop

# VISUALISER
bindsym $mod+Shift+v exec $term -name VIS -fn "xft:TerminessTTFNerdFontMono:size=9" -e vis

# PRIME VIDEO
bindsym $mod+Shift+n exec $browser2 --new-window\
 --app=https://www.amazon.co.uk/Amazon-Video/b/?node=3010085031&ref=atv_surl_aiv

# NETFLIX
bindsym $mod+n exec $browser2 --new-window\
 --app=https://www.netflix.com/

# GOOGLE PLAY MOVIES
bindsym $mod+Shift+m exec $browser2 --new-window\
 --app=https://play.google.com/movies/

# GOOGLE PLAY MUSIC
bindsym $mod+m exec $browser2 --new-window\
 --app=https://play.google.com/music/listen#/recents/

# YOUTUBE
bindsym $mod+Shift+y exec $browser2 --new-window\
 --app=https://www.youtube.com/

# ALSAMIXER
bindsym $win+a exec $term -e 'alsamixer'

# BROWSERS
bindsym $mod+c exec $browser2

# QALC
bindsym $mod+q exec $term -name CALC -e R

# EMAIL
bindsym $mod+Shift+u exec $browser2 --new-window\
 --app=https://outlook.office365.com/owa/?realm=soton.ac.uk

# NIGHT MODE
bindsym $mod+semicolon exec redshift -P -O 3700
bindsym $mod+apostrophe exec redshift -x

# MULTI-MONITOR SETTINGS
bindsym $win+m exec bash ~/$scripts/multimon
bindsym $win+v move workspace to output VGA1
#bindsym $win+v move workspace to output VGA-1
bindsym $win+d move workspace to output HDMI1
bindsym $win+e move workspace to output eDP1
#bindsym $win+e move workspace to output LVDS-1

# SCROT
bindsym Print exec bash ~/$scripts/screenshot

# BASHMOUNT
bindsym $mod+Shift+b exec $term -name BASHMOUNT -e bashmount

# NEWSBOAT
bindsym $mod+r exec --no-startup-id $term -name RSS -e newsboat

# GRIVE SYNC
bindsym $mod+Shift+g exec bash ~/$scripts/grive

# GIT REPO UPDATE
bindsym $win+g exec $term -name GITREPOUPDATE -e bash ~/$scripts/gitcommit

# GOOGLE DOCs
bindsym $mod+Ctrl+q exec $browser2 --new-window\
 --app=https://docs.google.com/document/u/0/
bindsym $mod+Ctrl+w exec $browser2 --new-window\
 --app=https://docs.google.com/spreadsheets/u/0/
bindsym $mod+Ctrl+r exec $browser2 --new-window\
 --app=https://docs.google.com/presentation/u/0/

# OPEN CONFIGS
bindsym $win+1 exec --no-startup-id $term -e vim ~/.config/i3/config
bindsym $win+2 exec --no-startup-id $term -e vim ~/.Xresources
bindsym $win+3 exec --no-startup-id $term -e vim ~/.vimrc
bindsym $win+4 exec --no-startup-id $term -e vim ~/.config/ranger/rc.conf
bindsym $win+5 exec --no-startup-id $term -e vim ~/scripts/mkblocksconf
bindsym $win+6 exec --no-startup-id $term -e vim ~/.config/qutebrowser/config.py

#############################################################################
### STARTUP DAEMONS

exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nm-applet
exec --no-startup-id xfce4-power-manager
exec --no-startup-id pamac-tray
exec --no-startup-id clipit
exec --no-startup-id blueman-applet
exec_always --no-startup-id ff-theme-util
exec_always --no-startup-id fix_xcursor
exec --no-startup-id feh --bg-scale ~/.config/wall.png
exec --no-startup-id mpd
exec setxkbmap us
#exec setxkbmap gb

#############################################################################
### STARTUP PROGRAMS

exec_always --no-startup-id urxvtd -q -o -f
exec --no-startup-id "i3-msg 'workspace 1; append_layout $home/.config/i3/workspace-1.json'"
#exec --no-startup-id "i3-msg 'workspace 9; append_layout $home/.config/i3/workspace-9.json'"
exec $browser2
exec $browser2 --new-window --app=https://www.youtube.com/
exec --no-startup-id $term -name RSS -e newsboat
exec --no-startup-id $term -name FILES -e ranger
exec_always mpv $home/scriptsounds/A\ Tone\ His\ Self.mp3
exec_always notify-send 'i3 (re)loaded!' -i ~/$scriptpics/i3white.png
