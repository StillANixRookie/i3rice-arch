#i3 config
#Please see http://i3wm.org/docs/userguide.html for a complete reference!

# >>>> FONT
set $font1 FixedsysMono
set $font2 FontAwesome
set $fonts 12

font pango:$font1,$font2 $fonts

# >>>> DEFINE VARIABLES
# ////// $MOD
set $mod        bindsym Mod1
set $modi       Mod1
set $win        bindsym Mod4
set $wini       Mod4
set $modrel     bindsym --release Mod1
set $winwlw     bindsym --whole-window Mod4
set $execn      exec --no-startup-id
set $execna     exec_always --no-startup-id

# ////// DIRS
set $home       /home/gavarch
set $scripts    scripts
set $scriptpics scriptpics

# ////// APPS
set $term       urxvtc
#set $term       urxvt
set $browser    google-chrome-beta
set $brightinc  xbacklight -inc 10
set $brightdec  xbacklight -dec 10
#set $brightinc  light -A 10
#set $brightdec  light -U 10
set $primary    eDP1
#set $primary    LVDS-1
set $secondary  VGA1
#set $secondary  VGA-1
set $tertiary   HDMI1

# ////// WORKSPACE NAMES
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10

# ////// COLORS
set_from_resource $blk	color0
set_from_resource $red	color1
set_from_resource $grn	color2
set_from_resource $ylw	color3
set_from_resource $blu	color4
set_from_resource $gnt	color5
set_from_resource $cyn	color6
set_from_resource $wht  color15
set $t 99

# >>>> DECORATIONS
# BORDER STYLE <normal|1pixel|pixel xx|none|pixel>
new_window pixel 0
new_float normal

# HIDE BORDERS
hide_edge_borders none

# COLORS
# class                 brdr bkgr text indi chlb
client.focused          $blu $blu $blk $blk $blk
client.focused_inactive $blk $blk $wht $blk $blk
client.unfocused        $blk $blk $wht $blk $blk
client.urgent           $blk $red $blk $blk $blk
client.placeholder      $blk $blk $wht $blk $blk
#client.background      $blk

# >>>> BAR
bar {
	i3bar_command i3bar
	status_command i3blocks -c ~/$scripts/i3blocks.conf
#	status_command i3blocks
	position top
	id bar-1

	bindsym button4 nop
	bindsym button5 nop
	font pango:$font1,$font2 $fonts

	colors {
	background $blk
#                       brdr bkgr text
	focused_workspace   $blk $blk $wht
	active_workspace    $blk $blk $cyn
	inactive_workspace  $blk $blk $blu
	binding_mode        $ylw $ylw $blk
	urgent_workspace    $red $red $blk
	}
}

# >>>> MOD1 BINDINGS
# ////// IMPORTANT
$mod+Shift+r        restart
$mod+Shift+c        $execn "bash $home/$scripts/xtheme; \
	                    bash $home/$scripts/reloadconfs; i3-msg reload; \
                        killall i3bar; i3bar --bar_id=bar-1"
$mod+Shift+q        kill
$winwlw+button2     kill
$mod+b bar          mode toggle
$mod+semicolon      exec redshift -P -O 3700
$mod+apostrophe     exec redshift -x
bindsym Print       exec bash ~/$scripts/screenshot
$mod+Shift+p        exec bash ~/$scripts/screenshot
$mod+d              exec rofi -show drun
$mod+Shift+d        exec dmenu_run -fn "$font1:size=$fonts" -nb \
                        "$blk" -nf "$wht" -sf "$blk" -sb "$blu"

# FOCUS/MOVE/RESIZE
$mod+h              focus left
$mod+j              focus down
$mod+k              focus up
$mod+l              focus right
$mod+a              focus parent
$mod+Shift+h        move left
$mod+Shift+j        move down
$mod+Shift+k        move up
$mod+Shift+l        move right
$mod+y resize       shrink width 10 px or 10 ppt
$mod+i resize       grow height 10 px or 10 ppt
$mod+u resize       shrink height 10 px or 10 ppt
$mod+o resize       grow width 10 px or 10 ppt

# ////// WORKFLOW
$mod+Return         exec $term
$mod+f              exec pcmanfm
$mod+Shift+Return   exec $term -name FILES -e ranger
$mod+Shift+b        exec $term -name BASHMOUNT -e bashmount
$mod+c              exec $browser
$mod+q              exec $term -name CALC -e R
$mod+Shift+u        exec $browser --new-window \
                        --app=https://outlook.office365.com/owa/?realm=soton.ac.uk
$mod+Shift+g        exec bash ~/$scripts/grivesync

# GOOGLE DOCs
$mod+Ctrl+q         exec $browser --new-window \
                        --app=https://docs.google.com/document/u/0/
$mod+Ctrl+w         exec $browser --new-window \
                        --app=https://docs.google.com/spreadsheets/u/0/
$mod+Ctrl+r         exec $browser --new-window \
                        --app=https://docs.google.com/presentation/u/0/

# ////// MEDIA
$mod+Shift+s        exec spotify
$mod+s              exec $term -name MUSIC -e ncmpcpp
$mod+v              exec $term -name VIS -e vis
$mod+Shift+v        exec $term -name NCMVIS -e ncmpcpp -s visualizer
$mod+Shift+n        exec $browser --new-window \
                        --app=https://www.amazon.co.uk/Amazon-Video/b/?node=3010085031&ref=atv_surl_aiv
$mod+n              exec $browser --new-window \
                        --app=https://www.netflix.com/
$mod+m              exec $browser --new-window \
                        --app=https://play.google.com/movies/
$mod+Shift+y        exec $browser --new-window \
                        --app=https://www.youtube.com/
$mod+r              $execn $term -name RSS -e newsboat

# GUI PLAYER CONTROLS
$mod+p              exec playerctl play-pause
$mod+bracketright   exec playerctl next
$mod+bracketleft    exec playerctl previous

# ////// LAYOUT
$mod+g              split toggle
$mod+e              layout toggle tabbed split
$mod+Shift+f        fullscreen toggle
floating_modifier   $modi
$mod+Shift+space    floating toggle
$mod+space          focus mode_toggle
$mod+Ctrl+s         sticky toggle
$mod+Shift+minus    move scratchpad
$mod+minus          scratchpad show

# ////// WORKSPACE
$mod+Ctrl+Right     workspace next # WORKSPACE NEXT
$mod+Ctrl+Left      workspace prev # WORKSPACE PREV

# SWITCH WORKSPACE
$mod+1              workspace $ws1
$mod+2              workspace $ws2
$mod+3              workspace $ws3
$mod+4              workspace $ws4
$mod+5              workspace $ws5
$mod+6              workspace $ws6
$mod+7              workspace $ws7
$mod+8              workspace $ws8
$mod+9              workspace $ws9
$mod+0              workspace $ws10

# MOVE TO WORKSPACE WITH FOCUSSED
$mod+Shift+1        move container to workspace $ws1; workspace $ws1
$mod+Shift+2        move container to workspace $ws2; workspace $ws2
$mod+Shift+3        move container to workspace $ws3; workspace $ws3
$mod+Shift+4        move container to workspace $ws4; workspace $ws4
$mod+Shift+5        move container to workspace $ws5; workspace $ws5
$mod+Shift+6        move container to workspace $ws6; workspace $ws6
$mod+Shift+7        move container to workspace $ws7; workspace $ws7
$mod+Shift+8        move container to workspace $ws8; workspace $ws8
$mod+Shift+9        move container to workspace $ws9; workspace $ws9
$mod+Shift+0        move container to workspace $ws10; workspace $ws10

# ////// GAPS
$mod+Ctrl+y         gaps inner current set 0; gaps outer current set 0
$mod+Ctrl+o         gaps inner current set 10; gaps outer current set 20
$mod+Ctrl+u         gaps inner current minus 5; gaps outer current minus 10
$mod+Ctrl+i         gaps inner current plus 5; gaps outer current plus 10

# ////// SHUTDOWN MODE
$mod+Escape         mode "SHUTDOWN"
mode "SHUTDOWN" {
    bindsym l $execn i3exit lock, mode "default"
    bindsym s $execn i3exit suspend, mode "default"
    bindsym u $execn i3exit switch_user, mode "default"
    bindsym e $execn i3exit logout, mode "default"
    bindsym h $execn i3exit hibernate, mode "default"
    bindsym r $execn i3exit reboot, mode "default"
    bindsym x $execn i3exit shutdown, mode "default"

    #exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# >>>> MOD4 BINDINGS

$win+o              exec $brightinc
$win+y              exec $brightdec
$win+i              exec pactl set-sink-volume 0 +2%
$win+u              exec pactl set-sink-volume 0 -2%
$win+x              exec pactl set-sink-mute 0 toggle
$win+f              exec gksu pcmanfm
$win+Shift+f        exec nautilus
$win+Shift+Return   exec $term -name FILES_ADMIN -e sudo ranger
$win+t              $execn pkill compton
$win+Shift+t        $execn compton
$win+w              $execn $term -name LAYOUT_EDITOR -e bash ~/$scripts/wsloget
$win+a              $execn bash ~/$scripts/wsloapp
$win+1              $execn $term -name i3CONF -e vim ~/.config/i3/config
$win+2              $execn $term -name XSETTINGS -e vim ~/xinclude/xmain
$win+3              $execn $term -name VIMRC -e vim ~/.vimrc
$win+4              $execn $term -name RANGER -e vim ~/.config/ranger/rc.conf
$win+5              $execn $term -name i3BLOCKS -e vim ~/scripts/mkblocksconf
$win+g              exec $term -name GITREPOUPDATE -e bash ~/$scripts/gitcommit
$win+c              exec $term -name CALENDAR -e vim +Calendar
$win+r              $execn $term -name RTV -e rtv
#$win+a              exec $term -name ALSA -e alsamixer

# ////// MPD CONTROLS
$win+p              exec mpc toggle
$win+bracketright   exec mpc next
$win+bracketleft    exec mpc prev
$win+backslash      exec mpc stop

# ////// MULTI-MONITOR
$win+m              exec bash ~/$scripts/multimon
$win+v              move workspace to output $secondary
$win+d              move workspace to output $tertiary
$win+e              move workspace to output $primary

# ////// CHANGE FOCUS
$win+h              exec "i3-msg focus parent; i3-msg focus left; \
                        i3-msg focus child"
$win+j              exec "i3-msg focus parent; i3-msg focus down; \
                        i3-msg focus child"
$win+k              exec "i3-msg focus parent; i3-msg focus up; \
                        i3-msg focus child"
$win+l              exec "i3-msg focus parent; i3-msg focus right; \
                        i3-msg focus child"

# ////// MOVE FOCUSSED
$win+Shift+h        exec "i3-msg focus parent; i3-msg move left; \
	                    i3-msg focus child"
$win+Shift+j        exec "i3-msg focus parent; i3-msg move down; \
	                    i3-msg focus child"
$win+Shift+k        exec "i3-msg focus parent; i3-msg move up; \
	                    i3-msg focus child"
$win+Shift+l        exec "i3-msg focus parent; i3-msg move right; \
	                    i3-msg focus child"

# ////// STICKY TILED
$win+s              exec bash $home/$scripts/i3-sticky-toggle
$winwlw+button1     $execn i3-input -F "[con_id=__focused__] mark _sticky_%s"
$winwlw+button2     $execn i3-input -F "[con_id=__focused__] unmark _sticky_%s"
$win+Shift+1        exec bash $home/$scripts/i3-sticky-create 1
$win+Shift+2        exec bash $home/$scripts/i3-sticky-create 2

# >>>> FOR_WINDOW
for_window [class="^.*"] border pixel 1
force_focus_wrapping yes
workspace_auto_back_and_forth yes
for_window  [urgent=latest] focus

# PRESET
for_window  [title="alsamixer"] floating enable border pixel 1
for_window  [class="Calamares"] floating enable border normal
for_window  [class="Clipgrab"] floating enable
for_window  [title="File Transfer*"] floating enable
for_window  [class="Galculator"] floating enable border pixel 1
for_window  [class="GParted"] floating enable border normal
for_window  [title="i3_help"] floating enable sticky enable border normal
for_window  [class="Lightdm-gtk-greeter-settings"] floating enable
for_window  [class="Lxappearance"] floating enable sticky enable border normal 2
for_window  [class="Manjaro-hello"] floating enable
for_window  [class="Manjaro Settings Manager"] floating enable border normal
for_window  [title="MuseScore: Play Panel"] floating enable
for_window  [class="Nitrogen"] floating enable sticky enable border normal
for_window  [class="Oblogout"] fullscreen enable
for_window  [class="octopi"] floating enable
for_window  [title="About Pale Moon"] floating enable
for_window  [class="Pamac-manager"] floating enable
for_window  [class="Pavucontrol"] floating enable
for_window  [class="qt5ct"] floating enable sticky enable border normal
for_window  [class="Qtconfig-qt4"] floating enable sticky enable border normal
for_window  [class="Simple-scan"] floating enable border normal
for_window  [class="(?i)System-config-printer.py"] floating enable border normal
for_window  [class="Skype"] floating enable border normal
for_window  [class="Thus"] floating enable border normal
for_window  [class="Timeset-gui"] floating enable border normal
for_window  [class="(?i)virtualbox"] floating enable border normal
for_window  [class="Xfburn"] floating enable

# OWN
for_window  [title="Netflix"] \
                mark _sticky_1,border pixel 0,floating enable,\
                sticky enable,resize set 460 259
for_window  [title="Amazon.co.uk: Prime Video"] \
                mark _sticky_1,border pixel 0,floating enable,\
                sticky enable,resize set 460 259
for_window  [class="MPlayer"] floating enable,border pixel 0,sticky enable
for_window  [class="mpv"] \
                mark _sticky_1,border pixel 0,\
                floating enable,sticky enable
for_window  [class="Pavucontrol"] floating enable,resize set 525 300
for_window  [title="Google Play Movies & TV"] \
                mark _sticky_1,floating enable,\
                border pixel 0,sticky enable,resize set 480 270
for_window  [class="matplotlib"] floating enable
for_window  [class="Cam"] floating enable
for_window  [class="Shutter"] \
                floating enable,border normal 2,\
                resize set 500 500,move position center
for_window  [title="Log in with PayPal - Chromium"] floating enable
for_window  [class="Blueman-manager"] floating enable
for_window  [instance="CALC"] floating enable border normal 2,resize set 480 480
for_window  [instance="BASHMOUNT"] \
                floating enable border normal 2,sticky enable,\
                resize set 430 500,move position center
for_window  [instance="GITREPOUPDATE"] \
                floating enable border normal 2,sticky enable,\
                resize set 430 500,move position center
for_window  [title="YouTube"] mark _sticky_1,border pixel 0

assign      [instance="RSS"]    $ws1
assign      [title="YouTube"]   $ws1
assign      [class="Nautilus"]  $ws2
for_window  [class="Spotify"]   move to workspace $ws9
assign      [instance="MUSIC"]	$ws9
assign      [instance="VIS"]    $ws9
assign      [class="Arandr"]    $ws10

# >>>> GAPS
gaps inner 10
gaps outer 20

workspace $ws1 gaps inner 0
workspace $ws1 gaps outer 0
workspace $ws2 gaps inner 0
workspace $ws2 gaps outer 0
workspace $ws9 gaps inner 40
workspace $ws9 gaps outer 80

# >>>> STARTUP
# DAEMONS
$execn          urxvtd -q -o -f
$execn          /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
$execn          nm-applet
$execn          xfce4-power-manager
$execn          pamac-tray
$execn          clipit
$execn          blueman-applet
$execn          compton
$execna         ff-theme-util
$execna         fix_xcursor
$execn          feh --bg-scale ~/.config/wall.png
$execn          mpd
$execn          shutter --min_at_startup
$execn          python $home/$scripts/i3-sticky
exec            setxkbmap us
#exec            setxkbmap gb

# PROGRAMS
$execn          "i3-msg 'workspace $ws1; append_layout $home/.config/i3/main.json'"
exec            $browser
exec            $browser --new-window --app=https://www.youtube.com/
exec_always     mpv $home/scriptsounds/A\ Tone\ His\ Self.mp3
exec_always     notify-send 'i3 (re)loaded!' -i ~/$scriptpics/i3white.png
