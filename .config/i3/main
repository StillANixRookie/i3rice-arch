# >>>> DEFINE VARIABLES
# //// i3

set $mod        bindsym Mod1
set $mdi        Mod1
set $win        bindsym Mod4
set $wni        Mod4
set $mrl        bindsym --release Mod1
set $wlw        bindsym --whole-window Mod4
set $exn        exec --no-startup-id
set $ena        exec_always --no-startup-id
set $lch        exec ~/scripts/i3launch
set $tf         title_format
set $fw         for_window
set $mk1        _win1
set $mk2        _win2
set $mk3        _win3
set $mrk1       mark _win1
set $mrk2       mark _win2
set $mrk3       mark _win3
set $stm1       mark _sticky_1
set $stm2       mark _sticky_2
set $stm3       mark _sticky_3
set $mvm1       move to mark _win1
set $mvm2       move to mark _win2
set $mvm3       move to mark _win3
set $flen       floating enable
set $fldi       floating disable
set $brnr       border normal
set $mvcn       move position center

# //// WORKSPACE NAMES

set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10

# //// COLORS

set_from_resource $blk	color0
set_from_resource $red	color1
set_from_resource $grn	color2
set_from_resource $ylw	color3
set_from_resource $blu	color4
set_from_resource $gnt	color5
set_from_resource $cyn	color6
set_from_resource $wht  color15
set $t 99

# >>>> DECORATIONS
# BORDER STYLE <normal|1pixel|pixel xx|none|pixel>
new_window pixel 0
new_float normal

# HIDE BORDERS
hide_edge_borders true

# COLORS
# class                 brdr bkgr text indi chlb
client.focused          $blu $blu $blk $blk $blk
client.focused_inactive $wht $wht $blk $blk $blk
client.unfocused        $blk $blk $wht $blk $blk
client.urgent           $blk $blk $red $blk $blk
client.placeholder      $blk $blk $wht $blk $blk
#client.background      $blk

# >>>> BAR
bar {
	i3bar_command i3bar
	status_command i3blocks -c ~/$scripts/i3blocks.conf
#	status_command i3blocks
#	position top
	id bar-1

	bindsym button4 nop
	bindsym button5 nop
	font pango:$font1,$font2 $fonts

	colors {
	background $blk
#                       brdr bkgr text
	focused_workspace   $blu $blu $blk
	active_workspace    $wht $wht $blk
	inactive_workspace  $blk $blk $wht
	binding_mode        $ylw $ylw $blk
	urgent_workspace    $red $red $blk
	}
}

# >>>> MOD1 IMPORTANT
# //// MAIN

$mod+Shift+r        restart
$mod+Shift+c        $exn "bash $home/$scripts/xtheme; \
	                    bash $home/$scripts/reloadconfs; \
                        killall i3bar; i3bar --bar_id=bar-1"
$mod+t              $exn "bash $home/$scripts/mkwalrando; \
                        bash $home/$scripts/reloadconfs; \
                        killall i3bar; i3bar --bar_id=bar-1"
$mod+Shift+q        kill
$wlw+button2        kill
$mod+Shift+b        bar mode toggle
$mod+semicolon      exec redshift -P -O 3700
$mod+apostrophe     exec redshift -x
bindsym Print       $exn bash ~/$scripts/screenshot
$mod+Shift+p        $exn bash ~/$scripts/screenshot
$mod+d              exec rofi -show drun
$mod+Shift+d        exec dmenu_run -fn "$font3:size=$fonts" -nb \
                        "$blk" -nf "$wht" -sf "$blk" -sb "$blu"

# //// FOCUS/MOVE/RESIZE

$mod+h              $exn bash $home/$scripts/i3viswiz left
$mod+j              $exn bash $home/$scripts/i3viswiz down
$mod+k              $exn bash $home/$scripts/i3viswiz up
$mod+l              $exn bash $home/$scripts/i3viswiz right
$mod+Tab            focus right
$mod+Shift+Tab      focus left
$mod+a              focus parent
$mod+Shift+h        $exn bash $home/$scripts/i3move left
$mod+Shift+j        $exn bash $home/$scripts/i3move down
$mod+Shift+k        $exn bash $home/$scripts/i3move up
$mod+Shift+l        $exn bash $home/$scripts/i3move right
$mod+y              resize shrink width 10 px or 10 ppt
$mod+i              resize grow height 10 px or 10 ppt
$mod+u              resize shrink height 10 px or 10 ppt
$mod+o              resize grow width 10 px or 10 ppt

# >>>> MOD1 BINDINGS
# //// WORKFLOW

$mod+Return         exec $term -name TERMINAL
$mod+f              $lch pcmanfm $mk2
$mod+Shift+Return   exec $term -name FILES -e ranger
$mod+b              $lch '$term -name BIB -e vim $home/Drive/global.bib' $mk2
$mod+c              exec $browser
$mod+q              exec $term -name CALC -e R
$mod+Shift+u        $lch '$browser --new-window \
                        --app=https://outlook.office365.com/owa/?realm=soton.ac.uk' \
                        $mk3
$mod+Shift+g        $lch '$term -name GRIVE -e bash ~/$scripts/grivesync' $mk2
$mod+Shift+a        $lch '$browser --new-window \
                        --app=https://www.funimation.com/' \
                        $mk1

# GOOGLE DOCs
$mod+Ctrl+q         exec $browser --new-window \
                        --app=https://docs.google.com/document/u/0/
$mod+Ctrl+w         exec $browser --new-window \
                        --app=https://docs.google.com/spreadsheets/u/0/
$mod+Ctrl+r         exec $browser --new-window \
                        --app=https://docs.google.com/presentation/u/0/

# //// MEDIA

$mod+Shift+s        exec spotify
$mod+s              $lch '$term -name MUSIC -e ncmpcpp' $mk1
$mod+v              $lch 'projectM-pulseaudio' $mk1
$mod+Shift+v        $lch '$term -name NCMVIS -e ncmpcpp -s visualizer' $mk2
$mod+Shift+n        $lch '$browser --new-window \
                        --app=https://www.amazon.co.uk/Amazon-Video/b/?node=3010085031&ref=atv_surl_aiv' \
                        $mk1
$mod+n              $lch '$browser --new-window \
                        --app=https://www.netflix.com/' $mk1
$mod+m              $lch '$browser --new-window \
                        --app=https://play.google.com/movies/' $mk1
$mod+Shift+y        $lch '$browser --new-window \
                        --app=https://www.youtube.com/' $mk1
$mod+Shift+i        $lch '$browser --new-window \
                        --app=https://www.bbc.co.uk/iplayer/' $mk1
$mod+w              $lch '$browser --new-window \
                        --app=https://ww2.watch-series.co/' $mk1
$mod+r              exec $term -name RSS -e newsboat

# GUI PLAYER CONTROLS
$mod+p              exec playerctl play-pause
$mod+bracketright   exec playerctl next
$mod+bracketleft    exec playerctl previous

# //// LAYOUT

$mod+g              split toggle
$mod+e              layout toggle tabbed split
$mod+Shift+f        fullscreen toggle
floating_modifier   $mdi
$mod+Shift+space    floating toggle
$mod+space          focus mode_toggle
$mod+Ctrl+s         sticky toggle
$mod+Shift+minus    move scratchpad
$mod+minus          scratchpad show

# //// WORKSPACE

$mod+Ctrl+Right     workspace next
$mod+Ctrl+Left      workspace prev

# SWITCH WORKSPACE
$mod+1              workspace $ws1
$mod+2              workspace $ws2
$mod+3              workspace $ws3
$mod+4              workspace $ws4
$mod+5              workspace $ws5
$mod+6              workspace $ws6
$mod+7              workspace $ws7
$mod+8              workspace $ws8
$mod+9              workspace $ws9
$mod+0              workspace $ws10

# MOVE TO WORKSPACE WITH FOCUSSED
$mod+Shift+1        move container to workspace $ws1; workspace $ws1
$mod+Shift+2        move container to workspace $ws2; workspace $ws2
$mod+Shift+3        move container to workspace $ws3; workspace $ws3
$mod+Shift+4        move container to workspace $ws4; workspace $ws4
$mod+Shift+5        move container to workspace $ws5; workspace $ws5
$mod+Shift+6        move container to workspace $ws6; workspace $ws6
$mod+Shift+7        move container to workspace $ws7; workspace $ws7
$mod+Shift+8        move container to workspace $ws8; workspace $ws8
$mod+Shift+9        move container to workspace $ws9; workspace $ws9
$mod+Shift+0        move container to workspace $ws10; workspace $ws10

# //// GAPS

$mod+Ctrl+y         gaps inner current set 0; gaps outer current set 0
$mod+Ctrl+o         gaps inner current set 10; gaps outer current set 20
$mod+Ctrl+u         gaps inner current minus 5; gaps outer current minus 10
$mod+Ctrl+i         gaps inner current plus 5; gaps outer current plus 10

# //// SHUTDOWN MODE

$mod+Escape         mode "SHUTDOWN"
mode "SHUTDOWN" {
    bindsym l $exn i3exit lock, mode "default"
    bindsym s $exn i3exit suspend, mode "default"
    bindsym u $exn i3exit switch_user, mode "default"
    bindsym e $exn i3exit logout, mode "default"
    bindsym h $exn i3exit hibernate, mode "default"
    bindsym r $exn i3exit reboot, mode "default"
    bindsym x $exn i3exit shutdown, mode "default"

    #exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# >>>> MOD4 BINDINGS
# //// MAIN
$win+Shift+c        exec bash ~/$scripts/i3concat
$win+o              exec "$brightinc; bash ~/$scripts/notify_brightness"
$win+y              exec "$brightdec; bash ~/$scripts/notify_brightness"
$win+i              exec "pactl set-sink-volume 0 +2%; bash ~/$scripts/notify_volume"
$win+u              exec "pactl set-sink-volume 0 -2%; bash ~/$scripts/notify_volume"
$win+x              exec "pactl set-sink-mute 0 toggle; bash ~/$scripts/notify_volume"
$win+b              $lch '$term -name BASHMOUNT -e bashmount' $mk2
$win+f              $lch 'gksu pcmanfm' $mk2
$win+Shift+f        $lch 'nautilus' $mk2
$win+Shift+Return   exec $term -name FILES_ADMIN -e sudo ranger
$win+t              $exn pkill compton
$win+Shift+t        $exn compton
$win+w              $lch '$term -name LAYOUT_EDITOR -e bash ~/$scripts/wsloget' $mk2
$win+a              $exn bash ~/$scripts/wsloapp
$win+1              $lch '$term -name i3MAIN -e vim ~/.config/i3/main' $mk3
$win+2              $lch '$term -name i3VARS -e vim ~/.config/i3/main' $mk3
$win+3              $lch '$term -name VIMRC -e vim ~/.vimrc' $mk3
$win+4              $lch '$term -name RCCONF -e vim ~/.config/ranger/rc.conf' $mk3
$win+5              $lch '$term -name i3BLOCKS -e vim ~/scripts/mkblocksconf' $mk3
$win+g              $lch '$term -name GITREPOUPDATE -e bash ~/$scripts/gitcommit' $mk2
$win+c              $lch '$term -name CALENDAR -e vim "+Calendar -view=day"' $mk2
$win+r              $lch '$term -name RTV -e rtv' $mk2

# //// MPD CONTROLS

$win+p              exec mpc toggle
$win+bracketright   exec mpc next
$win+bracketleft    exec mpc prev
$win+backslash      exec mpc stop

# //// MULTI-MONITOR

$win+m              exec bash ~/$scripts/multimon
$win+e              move workspace to output $primary
$win+v              move workspace to output $secondary
$win+d              move workspace to output $tertiary

# //// CHANGE FOCUS

$win+h              focus left
$win+j              focus down
$win+k              focus up
$win+l              focus right

# //// MOVE FOCUSSED

$win+Shift+h        move left
$win+Shift+j        move down
$win+Shift+k        move up
$win+Shift+l        move right

# //// STICKY TILED

$win+Shift+s        exec bash $home/$scripts/i3-sticky-toggle
$wlw+button1        $exn i3-input -F "[con_id=__focused__] mark _sticky_%s"
$win+Shift+1        exec python $home/$scripts/i3-sticky-open 1
$win+Shift+2        exec python $home/$scripts/i3-sticky-open 2
$win+Shift+3        exec python $home/$scripts/i3-sticky-open 3

# >>>> FOR_WINDOW
# //// ALL
              
focus_wrapping force
workspace_auto_back_and_forth yes
$fw [class="^.*"] border pixel 1
$fw [urgent=latest] focus

# //// UNMARKED

$fw [title="About Pale Moon"]               $flen
$fw [title="alsamixer"]                     $flen
$fw [class="Arandr"]                        $flen
$fw [class="Clipgrab"]                      $flen
$fw [title="File Transfer*"]                $flen
$fw [class="Galculator"]                    $flen
$fw [class="Lightdm-gtk-greeter-settings"]  $flen
$fw [class="Manjaro-hello"]                 $flen
$fw [title="MuseScore: Play Panel"]         $flen
$fw [class="Oblogout"]                      $flen
$fw [class="octopi"]                        $flen
$fw [class="Pamac-manager"]                 $flen
$fw [class="Pavucontrol"]                   $flen
$fw [class="Xfburn"]                        $flen
$fw [class="i3bar"]                         $flen

$fw [class="Calamares"]                     $flen,$brnr
$fw [class="GParted"]                       $flen,$brnr
$fw [title="i3_help"]                       $flen,$brnr
$fw [class="Lxappearance"]                  $flen,$brnr
$fw [class="Manjaro Settings Manager"]      $flen,$brnr
$fw [class="Nitrogen"]                      $flen,$brnr
$fw [class="qt5ct"]                         $flen,$brnr
$fw [class="Qtconfig-qt4"]                  $flen,$brnr
$fw [class="Simple-scan"]                   $flen,$brnr
$fw [class="(?i)System-config-printer.py"]  $flen,$brnr
$fw [class="Skype"]                         $flen,$brnr
$fw [class="Thus"]                          $flen,$brnr
$fw [class="Timeset-gui"]                   $flen,$brnr
$fw [class="(?i)virtualbox"]                $flen,$brnr
$fw [class="matplotlib"]                    $flen,$brnr
$fw [class="Cam"]                           $flen,$brnr
$fw [class="Blueman-manager"]               $flen,$brnr

$fw [class="Shutter"]                       $flen,$brnr,$mvcn,\
                                                resize set 500 500
$fw [class="Electron"]                      $flen,$brnr,$mvcn,\
                                                resize set 1000 700
$fw [instance="CALC"]                       $flen,$brnr,$mvcn,\
                                                resize set 480 480,\
                                                $tf "calculator"
$fw [class="Pavucontrol"]                   $flen,$brnr,\
                                                resize set 525 300

# //// MARKED

$fw [con_mark=_sticky_1]                resize set 715 423

$fw [class="ProjectM-pulseaudio"]       $mrk1
$fw [instance="CALENDAR"]               $mrk2,$tf "vim calendar"
$fw [title="Google Chrome$"]            $mrk3,$tf "google chrome"

$fw [class="MPlayer"]                   $mvm1
$fw [class="mpv"]                       $mvm1
$fw [class="feh"]                       $mvm1
$fw [class="Sxiv"]                      $mvm1

$fw [class="Surf"]                      $mvm2
$fw [class="Zathura"]                   $mvm2
$fw [class="MuPDF"]                     $mvm2
$fw [title="_popout="]                  $mvm2,$tf "popout chat"
$fw [title="^localhost:8090$"]          $mvm2,$tf "instant markdown preview"

$fw [instance="RSS"]                    $tf "newsboat"
$fw [title="^My Movies & TV"]           $tf "movies",$stm1
$fw [title="- Watch Series$"]           $tf "watch series",$stm1
$fw [title="Log in with PayPal"]        $tf "paypal login",$flen
$fw [instance="TERMINAL"]               $tf "terminal"
$fw [instance="GRIVE"]                  $tf "google drive sync"
$fw [instance="BIB"]                    $tf "biblbiography"
$fw [instance="NCMVIS"]                 $tf "ncmpcpp vis"
$fw [title="YouTube$"]                  $tf "youtube",$stm1
$fw [title="^BBC iPlayer$"]             $tf "iplayer",$stm1
$fw [title="^Netflix$"]                 $tf "netflix",$stm1
$fw [title="^Funimation"]               $tf "funimation",$stm1
$fw [title="Amazon.co.uk: Prime Video"] $tf "prime video",$stm1
$fw [instance="RTV"]                    $tf "reddit"
$fw [class="Slack"]                     $tf "slack"
$fw [title="^MATLAB R20"]               $tf "matlab"
$fw [instance="i3MAIN"]                 $tf "i3main"
$fw [instance="i3VARS"]                 $tf "i3vars"
$fw [instance="VIMRC"]                  $tf "vimrc"
$fw [instance="RCCONF"]                 $tf "ranger config"
$fw [instance="i3BLOCKS"]               $tf "i3blocks"
$fw [instance="BASHMOUNT"]              $tf "bashmount"
$fw [instance="GITREPOUPDATE"]          $tf "git-sync"
$fw [instance="MOUNT"]                  $tf "mount"
$fw [instance="UNMOUNT"]                $tf "unmount"

# >>>> GAPS
gaps inner 10
gaps outer 20

workspace $ws1 gaps inner 0
workspace $ws1 gaps outer 0
workspace $ws2 gaps inner 0
workspace $ws2 gaps outer 0

# >>>> STARTUP
# DAEMONS
$exn            urxvtd -q -o -f
$exn            /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
$exn            nm-applet
$exn            xfce4-power-manager
$exn            pamac-tray
$exn            clipit
$exn            blueman-applet
$exn            compton
$ena            ff-theme-util
$ena            fix_xcursor
$exn            feh --bg-fill ~/.config/wall.png
$exn            mpd
$exn            shutter --min_at_startup
$exn            python $home/$scripts/i3-sticky
exec            setxkbmap $kb

# PROGRAMS
$exn            "i3-msg 'workspace 1; append_layout $home/.config/i3/main.json'"
exec            $browser
exec            $browser --new-window --app=https://www.youtube.com/
exec_always     mpv $home/scriptsounds/A\ Tone\ His\ Self.mp3
exec_always     notify-send 'i3 (re)loaded!' -i ~/$scriptpics/i3white.png
