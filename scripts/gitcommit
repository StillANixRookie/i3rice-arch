#!/bin/bash

cd

black=$(xrdb -query | grep '*color0' | awk '{print $NF}')
white=$(xrdb -query | grep '*color7' | awk '{print $NF}')
blue=$(xrdb -query | grep '*color4' | awk '{print $NF}')
font=$(xrdb -query | grep 'URxvt.font' | awk '{print $NF}')

repo=$(cat ~/scripts/githubrepos | dmenu -i -p 'What repo do you want to update?' -fn "${font:4}" -nb "$black" -nf "$white" -sf "$black" -sb "$blue")

if [[ -z $repo ]]; then
    :
else
    cd ~/$repo
    notify-send "<font size="+2">This is bigger text.</font><span face='Font Awesome 5 Free'>&#xf113;</span> Updating your $repo git repo..."
    git add .
    git commit -m "$(date +"%c")"
    git fetch
    git merge origin/master
    git push -u origin master
    cd
    notify-send "<font size="+2">This is bigger text.</font><span face='Font Awesome 5 Free'>&#xf113;</span> ... $repo repo updated."
fi
